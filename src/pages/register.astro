---
import AuthLayout from "@/layouts/AuthLayout.astro";
import { RegisterForm } from "@/components/auth/RegisterForm";
import { getSafeNextPath } from "@/lib/http/redirect";

const rawNext = Astro.url.searchParams.get("next");
const next = getSafeNextPath(rawNext);

if (Astro.locals.auth?.isAuthenticated) {
  return Astro.redirect(next ?? "/dashboard");
}
---

<AuthLayout title="Rejestracja â€” 10x Facts">
  <RegisterForm client:load next={next} />
</AuthLayout>

